*** Begin Patch
*** Update File: tpc/pages/clients/rapport.php
@@
-<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
+<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
 <?php
 include_once  '../../class/client.class.php';
 include_once  '../../class/Factures.class.php';
 =->getAllClients();
@@
-<!-- DataTales Example -->
+<!-- Year Filter -->
+<form method="get" class="mb-3" style="width:95%;margin:10px auto;">
+  <div class="form-inline">
+    <label for="year" class="mr-2">Year</label>
+    <input type="number" id="year" name="year" class="form-control mr-2" min="2000" max="2100" value="<?=isset(['year'])?htmlspecialchars(['year']):''?>">
+    <button class="btn btn-primary btn-sm" type="submit">Filter</button>
+    <a href="rapport.php" class="btn btn-secondary btn-sm ml-2">Reset</a>
+  </div>
+  <?php if(isset(['year']) && ['year']!==''){ ?>
+    <small class="text-muted">Filtered by year: <?=htmlspecialchars(['year'])?></small>
+  <?php } ?>
+</form>
+
+<!-- DataTales Example -->
@@
-                                            <td>
-                                            <b><?=['nom_client']?></b>
-                                            </td>
-                                             <td>
-                                <?php if(!empty()){
-                                    =array();
-                                    foreach( as ){
-                                        array_push(,['classement']);
-                                        
-                                    ?>
-                                    
-                                    
-                                    
-                                    
-                                <?php } 
-                                =[0];
-                                for(=0;<count();++){
-                                    if(!=[]){
-                                        =.'<br>'.[];
-                                    }
-                                }
-                                echo .'<br>';
-
-                                    } if(!empty()){
-                                        foreach( as ){?>
-                                        <?=@['Projets']?><br>
-                                       
-                                    
-                                        <?php }}?>
-                                                    </td>
+                                            <td>
+                                            <b><?=['nom_client']?></b>
+                                            </td>
+                                             <td>
+                                <?php
+                                   = [];
+                                   = isset(['year']) && ['year'] !== '' ? preg_replace('/[^0-9]/','', ['year']) : null;
+
+                                  if(!empty()){
+                                    foreach( as ){
+                                       = isset(['date']) ? ['date'] : '';
+                                       =  ? @date('Y', strtotime()) : '';
+                                      if( &&  !== ) { continue; }
+                                      [] = [ 'date' => , 'year' => , 'label' => @['classement'] ];
+                                    }
+                                  }
+                                  if(!empty()){
+                                    foreach( as ){
+                                       = isset(['date']) ? ['date'] : '';
+                                       =  ? @date('Y', strtotime()) : '';
+                                      if( &&  !== ) { continue; }
+                                      [] = [ 'date' => , 'year' => , 'label' => @['Projets'] ];
+                                    }
+                                  }
+
+                                  usort(, function(,){
+                                    return strcmp((string)['date'], (string)['date']);
+                                  });
+
+                                  if(!empty()){
+                                    foreach( as ){
+                                       = (['year'] ? htmlspecialchars(['year']).' - ' : '') . htmlspecialchars((string)['label']) . (['date'] ? ' ('.htmlspecialchars(['date']).')' : '');
+                                      echo .'<br>';
+                                    }
+                                  }
+                                ?>
+                                             </td>
*** End Patch
